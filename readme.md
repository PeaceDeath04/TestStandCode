# Программное обеспечение для работы с тестовым стендом


## Структура Проекта
- `main.py`: Главный файл для запуска приложения.
- `readme.md`: Документация проекта.
- `Json Saves`: Папка для сохранения параметров и настроек. 
- `Exel Tables`: Хранит в себе exel таблицы после записи для чтения и анализа.
---


## Структура кода

Здесь описано, как работают основные модули проекта и их взаимосвязи.   
    
Если попытаться кратко обьяснить логику программы , то можно придти к 3 модулям
- Transceiver - отвечает за логику "общения" c Arduino
- UI_Controller - имеет в себе ui "обертку" главного окна и окна настроек
- Controller - связывающий 2 предедущих модуля и направляет запросы , пусть то на обработку , отображение и т.д

Controller имеет экзмепляры всех классов и доступов к модулям , При вызове или изменении какого либо состояния у 
вложенных обьектов, информация передается на контроллер , где он в свою очередь назначает дальнейшие действия.   
    
Так например, При получении нового пакета с ардуино в модуле трансивера он передает информацию (вызывает соответствующий метод) на контроллер с помощью
переданной ссылки на контроллер при его создании. Далее уже в контроллере вызывается метод создания класса packet, в котором информация обрабатывается
и группируется в словарь , где можно удобно получать информацию по ключу

---

### Модуль: `Transciever`

Модуль отвечает за передачу и прием данных. Также взаимодействует с отдельным модулем для работы с портами.

#### Родительский класс
- `read_data`: считывает данные по сериал порту и передает в метод `validate_data_packet`
- `send_data`: отправка данных по сериал порту.   
  - Принимает пары ключ-значение
  - Доступные ключи для отправки: `{"gas": "g", "gas_min": "m", "gas_max": "x", "ButCalibMotor": "k", "ResetTime": "t",
                            "Traction": "r", "Weight_1": "o", "Weight_2": "w"}`
  - Пример: `send_data(Traction=3)`, где слева указывается наименование ключа , а справа его значение. Программа ищет сходства и отправляет короткий ключи Traction = r , отправляем r3
- `validate_data_packet`: Статический метод принимающий список элементов , при успешном прохождении возвращает True

#### Дочерний класс `PortHandler` :
**Функции**  

- `OpenPort`: открыть порт  
- `ClosePort`: закрыть порт  
- `Update Port List`: Статический метод , возвращает **СПИСОК** строк в виде наименования порта

**Особенности:**
- Ссылка на обьект класса `QSerialPort` взята из родительского класса `Transciever`
---
### Модуль: `DataControl`
Его  основная задача хранить, записывать , необходимую информацию для работы с данными с пакетом данных ардуино
Не много про "Пакет" , имеет в себе 2 стадии , "грязный" и "обработанный" 
Грязным подразумевается его необработанность , не связность с другими параметрами такими как коэффицент калбировки, вес тарирования,
"грязный пакет" передается при создании в клас Packet, далее при его инициализации класс "Packet" обращается к вложенному по иерархии выше классу DataControl
получая свежие параметры для обработки , обрабатывает с параметрами и уже становится "обработанным пакетом" который сохраняется в DataControl

Данные для обработки:

- `calib_weight`: это вес для калибровки параметра "Traction" , "Weight" - тяга , вес
- `taring_traction`: словарь хранящий веса для первичного и вторичного тарирования параметра Traction.
- `taring_weight`: словарь хранящий веса для первичного и вторичного тарирования параметра Weight.
- `param_kef`: словарь хранящий коэф. калибровки параметров "Traction" , "Weight" - тяга , вес



